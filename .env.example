# DueSync Environment Variables Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ---------- Database Configuration ----------
# Use Transaction pooler for DATABASE_URL with pgbouncer parameter
# Connection limit should be 100 for production, lower for development
DATABASE_URL="postgresql://user:password@your-host.supabase.com:6543/postgres?pgbouncer=true&connection_limit=100"

# Use Session pooler for DIRECT_URL (for Prisma migrations)
# Use port 5432 for direct connection
DIRECT_URL="postgresql://user:password@your-host.supabase.com:5432/postgres"

# ---------- NextAuth Configuration ----------
# DEVELOPMENT: Use localhost
NEXTAUTH_URL="http://localhost:3000"

# PRODUCTION: Use your actual domain (replace before deploying)
# NEXTAUTH_URL="https://your-production-domain.com"

# Generate with: openssl rand -base64 32
# MUST be different for each environment
NEXTAUTH_SECRET="your-generated-secret-key-here"

# ---------- Google OAuth Configuration ----------
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# DEVELOPMENT
GOOGLE_REDIRECT_URI="http://localhost:3000/api/auth/callback/google"

# PRODUCTION (update when deploying)
# GOOGLE_REDIRECT_URI="https://your-production-domain.com/api/auth/callback/google"

# ---------- Server Configuration ----------
PORT=3000

# ---------- Push Notifications (VAPID Keys) ----------
# Generate with: npx web-push generate-vapid-keys
# MUST be unique for each environment
VAPID_PUBLIC_KEY="your-vapid-public-key"
NEXT_PUBLIC_VAPID_PUBLIC_KEY="your-vapid-public-key"
VAPID_PRIVATE_KEY="your-vapid-private-key"
VAPID_SUBJECT="mailto:your-email@your-domain.com"

# ---------- Cron Job Security ----------
# Secret for authenticating cron job requests
# Generate with: openssl rand -base64 32
# REQUIRED for production to prevent unauthorized cron job execution
CRON_SECRET="your-generated-cron-secret"

# ---------- Email Configuration (Resend) ----------
# Sign up at: https://resend.com (free tier: 100 emails/day)
RESEND_API_KEY="re_your_resend_api_key"

# From email address (must be verified in Resend)
# Format: name@yourdomain.com
RESEND_FROM_EMAIL="noreply@your-domain.com"

# ---------- Redis Configuration (Upstash) ----------
# Required for distributed rate limiting and cron job locks
# Sign up at: https://upstash.com (free tier available)
# Create Redis database and copy credentials below
UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-redis-token"

# ---------- Optional: Error Monitoring ----------
# Sentry for production error tracking (recommended)
# Sign up at: https://sentry.io (free tier available)
# NEXT_PUBLIC_SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
# SENTRY_AUTH_TOKEN="your-sentry-auth-token"

# ---------- Environment-Specific Notes ----------

# DEVELOPMENT CHECKLIST:
# ✓ Use localhost URLs
# ✓ Lower connection_limit (10-20)
# ✓ Can skip CRON_SECRET for localhost testing
# ✓ Use development Resend/Upstash accounts

# PRODUCTION CHECKLIST:
# ✓ Update NEXTAUTH_URL to production domain
# ✓ Update GOOGLE_REDIRECT_URI to production callback
# ✓ Set connection_limit to 100
# ✓ Set strong CRON_SECRET (required!)
# ✓ Use production-verified email in RESEND_FROM_EMAIL
# ✓ Use production Upstash Redis instance
# ✓ Add all environment variables to hosting platform (Vercel/Railway)
# ✓ Update Google OAuth authorized redirect URIs
# ✓ Enable Sentry error monitoring
# ✓ Verify all secrets are rotated from development

# SECURITY NOTES:
# - Never commit .env file to version control
# - Use different secrets for development, staging, and production
# - Rotate secrets regularly (every 90 days recommended)
# - Store production secrets in secure vault (1Password, AWS Secrets Manager)
# - Limit access to production environment variables
# - Use strong, randomly generated secrets (not simple passwords)
